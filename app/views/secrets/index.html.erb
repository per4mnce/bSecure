<%= grid(@secrets_grid, show_filters: :when_filtered) do |g|
  
  g.column do |secret|
    link_to("", edit_secret_path(secret), class: 'glyphicon glyphicon-pencil')
  end

  g.column name: 'CATEGORY', attribute: 'catname', custom_filter: :auto do |secret|
    secret.catname
  end
  
  g.column name: 'DESCRCIPTION', attribute: 'description' do |secret|
    if secret.description
      #Only show the first max_size characters
      formatField(10, secret.description)
      #secret.description.length > max_size ? secret.description[0, max_size] + "..." : secret.description
    end
  end
  
  g.column name: 'USERNAME', attribute: 'username' do |secret|
    formatField(10,secret.username)
    # if secret.username
    #   #Only show the first max_size characters
    #   max_size = 10
    #   secret.username.length > max_size ? secret.username[0, max_size] + "..." : secret.username
    # end
  end
  
  g.column name: 'PASSWORD', attribute: 'pw' do |secret|
    formatField(10,secret.pw)
    # if secret.pw
    #   #Only show the first max_size characters
    #   max_size = 10
    #   secret.pw.length > max_size ? secret.pw[0, max_size] + "..." : secret.pw
    # end
  end
  
  g.column name: 'URL', attribute: 'url' do |secret|
    formatField(10,secret.url)   
    # if secret.url
    #   #Only show the first max_size characters
    #   max_size = 10
    #   secret.url.length > max_size ? secret.url[0, max_size] + "..." : secret.url
    # end
  end
  
  g.column name: 'NOTES', attribute: 'notes', ordering: false do |secret|
    markdown(formatField(25,secret.notes))
    #Only show the first max_size characters
    # max_size = 50
    # secret.notes.length > max_size ? markdown(secret.notes[0,max_size] + "...") : markdown(secret.notes)
  end
  
  g.column do |secret|
    link_to("", secret, method: :delete, class: 'glyphicon glyphicon-remove', data: { confirm: 'Are you sure you want to delete this record?' })
  end
  
  

end -%>

<%= link_to "New", new_secret_path, class: 'btn btn-primary' %>
<button class="wg-external-csv-export-button btn btn-primary" data-grid-name="g1">Export To CSV</button>
